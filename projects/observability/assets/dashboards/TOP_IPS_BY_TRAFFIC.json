{
  "location": "IPL_2022",
  "json": {
    "type": "container-widget",
    "layout": {
      "type": "custom-container-layout",
      "enable-style": false,
      "column-dimensions": [
        {
          "type": "dimension-model",
          "dimension": 1,
          "unit": "FR"
        },
        {
          "type": "dimension-model",
          "dimension": 1,
          "unit": "FR"
        },
        {
          "type": "dimension-model",
          "dimension": 1,
          "unit": "FR"
        }
      ],
      "row-dimensions": [
        {
          "type": "dimension-model",
          "dimension": 28,
          "unit": "PX"
        },
        {
          "type": "dimension-model",
          "dimension": 28,
          "unit": "PX"
        },
        {
          "type": "dimension-model",
          "dimension": 328,
          "unit": "PX"
        },
        {
          "type": "dimension-model",
          "dimension": 400,
          "unit": "PX"
        }
      ],
      "cell-spans": [
        {
          "type": "cell-span-model",
          "col-start": 0,
          "col-end": 3,
          "row-start": 0,
          "row-end": 1
        },
        {
          "type": "cell-span-model",
          "col-start": 0,
          "col-end": 3,
          "row-start": 1,
          "row-end": 2
        },
        {
          "type": "cell-span-model",
          "col-start": 0,
          "col-end": 3,
          "row-start": 2,
          "row-end": 3
        },
        {
          "type": "cell-span-model",
          "col-start": 0,
          "col-end": 3,
          "row-start": 3,
          "row-end": 4
        }
      ]
    },
    "children": [
      {
        "type": "greeting-label-widget",
        "suffix-label": ", today's Report"
      },
      {
        "type": "text-widget",
        "text": "Top IPs by Traffic"
      },
      {
        "type": "table-widget",
        "id": "custom-dashboard.ips-table",
        "mode": "flat",
        "style": "embedded",
        "columns": [
          {
            "type": "table-widget-column",
            "title": "IP",
            "display": "Metric",
            "value": {
              "type": "explore-selection",
              "metric": {
                "key": "tags",
                "subpath": "request.header.x-real-ip"
              }
            }
          },
          {
            "type": "table-widget-column",
            "title": "Calls",
            "display": "Metric",
            "value": {
              "type": "explore-selection",
              "metric": "calls",
              "aggregation": "count"
            },
            "sort": "DESC"
          }
        ],
        "data": {
          "type": "explore-table-data-source",
          "context": "API_TRACE",
          "limit": 5,
          "interval": {
            "type": "time-duration",
            "unit": "m",
            "value": 15
          },
          "filters": [
            {
              "type": "graphql-key-value-filter",
              "key": {
                "key": "tags",
                "subpath": "request.header.x-real-ip"
              },
              "operator": "NOT_EQUALS",
              "value": ""
            }
          ],
          "group-by": [
            {
              "key": "tags",
              "subpath": "request.header.x-real-ip"
            }
          ]
        }
      },
      {
        "type": "top-n-widget",
        "header": {
          "type": "widget-header",
          "title": "Top Endpoints"
        },
        "data": {
          "type": "top-n-data-source",
          "entity": "API",
          "result-limit": 10,
          "options": [
            {
              "type": "top-n-explore-selection",
              "metric": {
                "type": "explore-selection",
                "display-name": "Calls",
                "metric": "numCalls",
                "aggregation": "sum"
              },
              "context": "API"
            },
            {
              "type": "top-n-explore-selection",
              "metric": {
                "type": "explore-selection",
                "display-name": "Errors",
                "metric": "errorCount",
                "aggregation": "sum"
              },
              "context": "API"
            },
            {
              "type": "top-n-explore-selection",
              "metric": {
                "type": "explore-selection",
                "display-name": "p99 Latency",
                "metric": "duration",
                "aggregation": "p99"
              },
              "context": "API"
            },
            {
              "type": "top-n-explore-selection",
              "metric": {
                "type": "explore-selection",
                "display-name": "p50 Latency",
                "metric": "duration",
                "aggregation": "p50"
              },
              "context": "API"
            }
          ]
        }
      }
    ]
  }
}
